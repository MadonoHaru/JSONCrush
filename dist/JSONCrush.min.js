!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((e=e||self).window=e.window||{})}(this,function(e){"use strict";function u(e,n){void 0===n&&(n=!0);var r=[['"',"'"],["':","!"],[",'","~"],["}",")","\\","\\"],["{","(","\\","\\"]];function i(e,n){var r=new RegExp((n[2]?n[2]:"")+n[0]+"|"+((n[3]?n[3]:"")+n[1]),"g");return e.replace(r,function(e){return e===n[0]?n[1]:n[0]})}if(n)for(var o=0;o<r.length;++o)e=i(e,r[o]);else for(o=r.length;o--;)e=i(e,r[o]);return e}e.JSONCrush=function(e){e=u(e=e.replace(/\u0001/g,""));for(var n=[],r=127;--r;)(48<=r&&r<=57||65<=r&&r<=90||97<=r&&r<=122||"-_.!~*'()".includes(String.fromCharCode(r)))&&n.push(String.fromCharCode(r));var i=!0;for(var r in n){var o=n[r];if(!e.includes(o)){i=!1;break}}if(i)for(r=2;r<255;++r){"\\"==(o=String.fromCharCode(r))||n.includes(o)||n.unshift(o)}var f=function(e,n){function r(e){return encodeURI(e).replace(/%../g,"i").length}var i,o,f,t,u,a,d,l,s,c,p,v,h={},g=n,x=e;for(i=1,f="";;){for(a=u=p=c=0,t=g.length;!c&&t--;)~x.indexOf(g[t])||(c=g[t]);if(!c)break;if(o){for(v in h={},o)for(l=x.indexOf(v),h[v]=0;~l;h[v]++)l=x.indexOf(v,l+v.length);o=h}else for(o=h={},d=1;i&&d<50;d++)for(i=t=0;++t<x.length-d;)if(!h[v=x.substr(l=t,d)]&&~(l=x.indexOf(v,l+d)))for(i=d,h[v]=1;~l;h[v]++)l=x.indexOf(v,l+d);for(var b in o)l=r(b),(l=(s=o[b])*l-l-(s+1)*r(c))&&(a<l||l==a&&u<s)&&(a=l,u=s,p=b),l<1&&delete o[b];for(var C in h={},o)h[C.split(p).join(c)]=1;if(o=h,!p)break;x=x.split(p).join(c)+c+p,f=c+f}return{a:x,b:f}}(e,n),t=f.a+""+f.b;return encodeURIComponent(t)},e.JSONUncrush=function(e){var n=e.split(""),r=n[0],i=n[1];for(var o in i.split("")){var f=r.split(i[o]);r=f.join(f.pop())}return u(r,!1)},Object.defineProperty(e,"__esModule",{value:!0})});